import{z as ee,E as te,H as ae,T as n,J as f,K as se,M as ne,j as e,_ as ie,O as re,P as oe,h as T,B as a,a as p,X as I,Y as R,Z as W,$ as D,a6 as le,l as M,a7 as K,c as de,d as H,a8 as V,a9 as U,aa as F,ab as Y,ac as me,ad as J,ae as $}from"./index-CpGWNxNa.js";import{S as G}from"./Skeleton-FVbYjgpo.js";import{S as E,B as q,a as ce,b as ue,c as xe}from"./arsitektur-bisnis-Bgs8Rp8F.js";import{D as X,C as _,F as w,c as he,S as Z}from"./request-helpers-D0O3LUco.js";import{A as Q,D as B}from"./DashboardAdminLayout-CN4Vh8VJ.js";import{B as L}from"./Button-DrUDL9uD.js";function fe(i){return ee("MuiAlertTitle",i)}te("MuiAlertTitle",["root"]);const pe=["className"],ge=i=>{const{classes:m}=i;return oe({root:["root"]},fe,m)},je=ae(n,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(i,m)=>m.root})(({theme:i})=>({fontWeight:i.typography.fontWeightMedium,marginTop:-2})),Ee=f.forwardRef(function(m,h){const d=se({props:m,name:"MuiAlertTitle"}),{className:o}=d,z=ne(d,pe),c=d,g=ge(c);return e.jsx(je,ie({gutterBottom:!0,component:"div",ownerState:c,ref:h,className:re(g.root,o)},z))}),be=T(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRightOutlined"),ke=T(e.jsx("path",{d:"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3z"}),"CreateNewFolder"),_e=T(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline"),Se=T(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),ze=T(e.jsx("path",{d:"M12 22H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2v6h-2v-2H5v10h7zm10.13-5.01.71-.71c.39-.39.39-1.02 0-1.41l-.71-.71a.9959.9959 0 0 0-1.41 0l-.71.71zm-.71.71-5.3 5.3H14v-2.12l5.3-5.3z"}),"EditCalendar"),Le=T(e.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNoteOutlined"),ye=T(e.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder"),ve=T(e.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen"),Oe=T(e.jsx("path",{d:"M9 3 5 6.99h3V14h2V6.99h3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99z"}),"ImportExport"),Ae=T(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz"),Ce=T(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3zm-3-7V3.5L18.5 9z"}),"NoteAdd");function He({sxProps:i}){const m=[{text:"RAB.01 PERTAHANAN DAN LUAR NEGERI"},{text:"RAB.02 EKONOMI DAN INDUSTRI"},{text:"RAB.03 PEMBANGUNAN KEWILAYAHAN"},{text:"RAB.04 PERLINDUNGAN SOSIAL DAN KESEHATAN"},{text:"RAB.05 KETERTIBAN UMUM DAN KESELAMATAN"},{text:"RAB.06 PENDIDIKAN DAN TENAGA KERJA"},{text:"RAB.07 LINGKUNGAN DAN SUMBER DAYA ALAM"},{text:"RAB.08 BUDAYA DAN AGAMA"},{text:"RAB.09 PEMERINTAHAN UMUM"}];return e.jsx(a,{component:"div",className:"skeleton-folder-card",sx:{width:"100%",height:"90vh",overflow:"hidden"},children:m.map((h,d)=>e.jsxs(a,{component:"div",sx:{display:"flex",gap:"0 0.5em",alignItems:"center",marginTop:d===0?void 0:"0.5em",marginBottom:d===m.length-1?void 0:"0.5em",paddingLeft:"2em",paddingY:"0.5em",boxShadow:p[300]+" 0px 1px 4px",borderRadius:"0.3em",...i},children:[e.jsx(a,{component:"div",children:e.jsx(G,{variant:"rectangular",width:"2em",height:"1.5em",sx:{borderRadius:"0.3em"}})}),e.jsxs(a,{component:"div",children:[e.jsx(G,{variant:"text",children:e.jsx(n,{variant:"subtitle1",children:h.text})}),e.jsx(G,{children:e.jsx(n,{variant:"caption",children:"Created at Fri Sep 13 2024"})})]})]},d))})}function Ne({folderLevel:i,dataRef:m,openDialog:h,setOpenDialog:d}){const[o,z]=f.useState({nama:"",kode:0}),[c,g]=f.useState(!1),[r,x]=f.useState(),[v,l]=f.useState(""),j=s=>{switch(s){case"1":return"Sub Referensi";case"2":return"Detail Referensi";default:return"Doesn't match any folder level"}},b=s=>{let t;s.target.name==="kode"&&(t=isNaN(Number(s.target.value))?0:Number(s.target.value)),z(u=>({...u,[s.target.name]:s.target.name==="kode"?t:s.target.value}))},C=(s,t)=>{t!=="clickaway"&&l("")},y=async s=>{let t,u;s.preventDefault(),g(!0);const k=q.safeParse(o);if(!k.success)return g(!1),x(k.error.flatten().fieldErrors);switch(x({}),i){case"1":t="sub_refrensi",u="induk_refrensi_id";break;case"2":t="refrensi_detail",u="sub_refrensi_id";break;default:return l("Invalid folder level")}const N=await w("https://spbe-malkot.onrender.com/api/v1/"+t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+D.get("authToken")},body:JSON.stringify({[u]:m.id,...o})});return N.success?(g(!1),z({nama:"",kode:0}),l("Data berhasil ditambahkan"),setTimeout(()=>{d(S=>({...S,create:!1}))},2e3)):(g(!1),l(N.message))};return e.jsx(X,{open:h,onClose:()=>d(s=>({...s,create:!1})),PaperProps:{sx:{borderRadius:"0.3em",minWidth:"25em"}},children:e.jsxs(a,{component:"div",className:"dialog-content-container",children:[e.jsxs(a,{component:"div",className:"dialog-content-header",sx:{display:"flex",padding:"0.5em 0"},children:[e.jsxs(a,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(Q,{fontSize:"small",color:"primary",sx:{marginX:"0.5em"}}),e.jsx(n,{variant:"subtitle1",sx:{fontWeight:550,color:p[700]},children:j(i)+" Arsitektur"})]}),e.jsx(I,{onClick:()=>d(s=>({...s,create:!1})),children:e.jsx(_,{fontSize:"small"})})]}),e.jsx(B,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsxs(a,{component:"div",className:"dialog-content-body",sx:{paddingX:"0.7em"},children:[e.jsxs(n,{variant:"subtitle2",sx:{marginBottom:"0.75em"},children:["Data ",e.jsx("span",{style:{fontSize:"0.75em",fontStyle:"italic"},children:"(Masukkan data referensi)"})]}),e.jsxs("form",{onSubmit:y,children:[e.jsx(R,{type:"text",name:"nama",label:"Nama "+j(i),placeholder:"Masukkan nama induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:o.nama,onChange:b,error:!!(r!=null&&r.nama),helperText:r&&r.nama}),e.jsx(R,{type:"text",name:"kode",label:"Kode "+j(i),placeholder:"Masukkan kode induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:o.kode,onChange:b,error:!!(r!=null&&r.kode),helperText:r&&r.kode}),e.jsx(B,{orientation:"horizontal",sx:{marginY:"0.5em"}}),e.jsx(a,{sx:{textAlign:"end",marginBottom:"0.75em"},children:e.jsx(L,{type:"submit",size:"small",variant:"contained",sx:{minWidth:"10em"},disabled:c,children:c?e.jsx(W,{size:20,sx:{color:"inherit"}}):"Submit"})})]}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:v!=="",autoHideDuration:1500,message:v,onClose:C})]})]})})}function Te({folderLevel:i,dataRef:m,openDialog:h,setOpenDialog:d,setDataAction:o}){const[z,c]=f.useState({nama:m.nama,kode:m.kode}),[g,r]=f.useState(!1),[x,v]=f.useState(),[l,j]=f.useState(""),b=t=>{switch(t){case"1":return"Induk Referensi";case"2":return"Sub Referensi";case"3":return"Detail Referensi";default:return"Doesn't match any folder level"}},C=t=>{let u;t.target.name==="kode"&&(u=isNaN(Number(t.target.value))?0:Number(t.target.value)),c(k=>({...k,[t.target.name]:t.target.name==="kode"?u:t.target.value}))},y=(t,u)=>{u!=="clickaway"&&j("")},s=async t=>{let u,k;t.preventDefault(),r(!0);const N=q.safeParse(z);if(!N.success)return r(!1),v(N.error.flatten().fieldErrors);switch(v({}),i){case"1":u="induk_refrensi",k="refrensi_arsitektur_id";break;case"2":u="sub_refrensi",k="induk_refrensi_id";break;case"3":u="refrensi_detail",k="sub_refrensi_id";break;default:return j("Invalid folder level")}const S=await w("https://spbe-malkot.onrender.com/api/v1/"+u+"/"+m.id,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+D.get("authToken")},body:JSON.stringify({[k]:m[k],...z})});return console.info("request update 	:",S),S.success?(r(!1),o(A=>!A),j("Data berhasil diubah"),setTimeout(()=>{d(A=>({...A,update:!1}))},2e3)):(r(!1),j(S.message))};return e.jsx(X,{open:h,onClose:()=>d(t=>({...t,update:!1})),PaperProps:{sx:{borderRadius:"0.3em",minWidth:"25em"}},children:e.jsxs(a,{component:"div",className:"dialog-content-container",children:[e.jsxs(a,{component:"div",className:"dialog-content-header",sx:{display:"flex",padding:"0.5em 0"},children:[e.jsxs(a,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(Q,{fontSize:"small",color:"primary",sx:{marginX:"0.5em"}}),e.jsx(n,{variant:"subtitle1",sx:{fontWeight:550,color:p[700]},children:b(i)+" Arsitektur"})]}),e.jsx(I,{onClick:()=>d(t=>({...t,update:!1})),children:e.jsx(_,{fontSize:"small"})})]}),e.jsx(B,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsxs(a,{component:"div",className:"dialog-content-body",sx:{paddingX:"0.7em"},children:[e.jsxs(n,{variant:"subtitle2",sx:{marginBottom:"0.75em"},children:["Data ",e.jsx("span",{style:{fontSize:"0.75em",fontStyle:"italic"},children:"(Masukkan data referensi)"})]}),e.jsxs("form",{onSubmit:s,children:[e.jsx(R,{type:"text",name:"nama",label:"Nama "+b(i),placeholder:"Masukkan nama induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:z.nama,onChange:C,error:!!(x!=null&&x.nama),helperText:x&&x.nama}),e.jsx(R,{type:"text",name:"kode",label:"Kode "+b(i),placeholder:"Masukkan kode induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:z.kode,onChange:C,error:!!(x!=null&&x.kode),helperText:x&&x.kode}),e.jsx(B,{orientation:"horizontal",sx:{marginY:"0.5em"}}),e.jsx(a,{sx:{textAlign:"end",marginBottom:"0.75em"},children:e.jsx(L,{type:"submit",size:"small",variant:"contained",sx:{minWidth:"10em"},disabled:g,children:g?e.jsx(W,{size:20,sx:{color:"inherit"}}):"Submit"})})]}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:l!=="",autoHideDuration:1500,message:l,onClose:y})]})]})})}function Ve({folderLevel:i,folderSxProps:m,collapseHandler:h,dataRef:d,collapseState:o,kodeReferensiArsitektur:z,setDataAction:c}){const[g,r]=f.useState(null),x=!!g,[v,l]=f.useState({create:!1,update:!1}),j=`${d.nama}#${d.kode}`;return e.jsxs(a,{component:"div",className:"induk-referensi-item",sx:{display:"flex",gap:"0 0.5em",alignItems:"center",padding:"0.5em 0em",borderRadius:"0.3em",boxShadow:"rgba(0, 0, 0, 0.16) 0px 1px 4px",...m},children:[e.jsx(I,{size:"small",onClick:h(j),children:o[j]?e.jsx(le,{fontSize:"small",sx:{color:p[600]}}):e.jsx(be,{fontSize:"small",sx:{color:p[600]}})}),e.jsx(a,{component:"div",children:o[j]?e.jsx(ve,{fontSize:"large",sx:{color:M[400]}}):e.jsx(ye,{fontSize:"large",sx:{color:M[400]}})}),e.jsxs(a,{sx:{flexGrow:1},children:[e.jsx(n,{component:"div",variant:"subtitle2",sx:{color:p[700],cursor:"pointer"},onClick:h(j),children:z+" "+d.nama}),e.jsxs(a,{component:"div",className:"time-info",sx:{display:"flex"},children:[e.jsx(n,{variant:"caption",sx:{color:p[500],fontStyle:"italic"},children:`Created at ${new Date(d.created_at).toDateString()}`}),e.jsx(B,{orientation:"vertical",flexItem:!0,sx:{marginX:"0.5em"}}),e.jsx(n,{variant:"caption",sx:{color:p[500],fontStyle:"italic"},children:`Updated at ${new Date(d.updated_at).toDateString()}`})]})]}),e.jsxs(a,{component:"div",className:"count-sub-referensi",children:[e.jsx(I,{onClick:b=>{r(b.currentTarget)},children:e.jsx(Ae,{})}),e.jsx(K,{open:x,anchorEl:g,onClose:()=>r(null),slotProps:{paper:{sx:{minWidth:"10em",boxShadow:"none",border:`1px solid ${p[400]}`,borderRadius:"0.3em"}}},children:e.jsxs(de,{disablePadding:!0,children:[i==="3"?"":e.jsx(H,{disableGutters:!0,disablePadding:!0,children:e.jsxs(V,{sx:{padding:"0.2em 1em"},onClick:()=>l(b=>({...b,create:!0})),children:[e.jsx(U,{sx:{paddingRight:"0.5em"},children:e.jsx(ke,{fontSize:"small"})}),e.jsx(F,{primary:e.jsxs(n,{variant:"caption",children:[i==="1"&&"Tambah Sub Referensi",i==="2"&&"Tambah Detail Referensi"]})})]})}),e.jsx(H,{disableGutters:!0,disablePadding:!0,children:e.jsxs(V,{sx:{padding:"0.2em 1em"},onClick:()=>l(b=>({...b,update:!0})),children:[e.jsx(U,{sx:{paddingRight:"0.5em"},children:e.jsx(Se,{fontSize:"small"})}),e.jsx(F,{primary:e.jsx(n,{variant:"caption",children:"Ubah Data"})})]})}),e.jsx(H,{disableGutters:!0,disablePadding:!0,children:e.jsxs(V,{sx:{padding:"0.2em 1em",color:Y[300]},disabled:!0,children:[e.jsx(U,{sx:{paddingRight:"0.5em"},children:e.jsx(he,{fontSize:"small",sx:{color:Y[300]}})}),e.jsx(F,{primary:e.jsx(n,{variant:"caption",children:"Hapus Data"})})]})})]})}),e.jsx(Te,{folderLevel:i,setDataAction:c,dataRef:d,openDialog:v.update,setOpenDialog:l}),e.jsx(Ne,{folderLevel:i,dataRef:d,openDialog:v.create,setOpenDialog:l})]})]})}function Ue({referensiArsitekturId:i,openDialog:m,setOpenDialog:h,setDataAction:d}){const[o,z]=f.useState({nama:"",kode:0}),[c,g]=f.useState(),[r,x]=f.useState(""),[v,l]=f.useState(!1),j=y=>{let s;y.target.name==="kode"&&(s=isNaN(Number(y.target.value))?0:Number(y.target.value)),z(t=>({...t,[y.target.name]:y.target.name==="kode"?s:y.target.value}))},b=(y,s)=>{s!=="clickaway"&&x("")},C=async y=>{l(!0),y.preventDefault();const s=ce.safeParse({refrensi_arsitektur_id:i,...o});if(!s.success)return l(!1),console.info(s.error.flatten().fieldErrors),g(s.error.flatten().fieldErrors);g({});const t=await w("https://spbe-malkot.onrender.com/api/v1/induk_refrensi",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+D.get("authToken")},body:JSON.stringify({refrensi_arsitektur_id:i,...o})});return console.info("Validated Data 	: ",s.data),t.success?(l(!1),z({nama:"",kode:0}),x("Berhasil menambahkan data"),setTimeout(()=>{h(!1)},2e3),d(u=>!u)):(l(!1),console.info("request fail 	: ",t),x(t.message))};return e.jsx(X,{open:m,onClose:()=>h(!1),PaperProps:{sx:{borderRadius:"0.3em",minWidth:"25em"}},children:e.jsxs(a,{component:"div",className:"dialog-content-container",children:[e.jsxs(a,{component:"div",className:"dialog-content-header",sx:{display:"flex",padding:"0.5em 0"},children:[e.jsxs(a,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(me,{fontSize:"small",color:"primary",sx:{marginX:"0.5em"}}),e.jsx(n,{variant:"subtitle1",sx:{fontWeight:550,color:p[700]},children:"Induk Referensi Arsitektur"})]}),e.jsx(I,{onClick:()=>h(!1),children:e.jsx(_,{fontSize:"small"})})]}),e.jsx(B,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsxs(a,{component:"div",className:"dialog-content-body",sx:{paddingX:"0.7em"},children:[e.jsxs(n,{variant:"subtitle2",sx:{marginBottom:"0.75em"},children:["Data ",e.jsx("span",{style:{fontSize:"0.75em",fontStyle:"italic"},children:"(Masukkan data induk referensi)"})]}),e.jsxs("form",{onSubmit:C,children:[e.jsx(R,{type:"text",name:"nama",label:"Nama Induk Referensi",placeholder:"Masukkan nama induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:o.nama,onChange:j,error:!!(c!=null&&c.nama),helperText:c&&c.nama}),e.jsx(R,{type:"text",name:"kode",label:"Kode Induk Referensi",placeholder:"Masukkan kode induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:o.kode,onChange:j,error:!!(c!=null&&c.kode),helperText:c&&c.kode}),e.jsx(B,{orientation:"horizontal",sx:{marginY:"0.5em"}}),e.jsx(a,{sx:{textAlign:"end",marginBottom:"0.75em"},children:e.jsx(L,{type:"submit",size:"small",variant:"contained",sx:{minWidth:"10em"},disabled:v,children:v?e.jsx(W,{size:20,sx:{color:"inherit"}}):"Submit"})})]}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:r!=="",autoHideDuration:1500,message:r,onClose:b})]})]})})}const Re=J.forwardRef(function(m,h){return e.jsx($,{...m,ref:h,direction:"left"})});function Fe(i){const{anchorEl:m,setAnchorEl:h,menuOpen:d,dataReferensi:o,setDataAction:z}=i,[c,g]=f.useState({nama:"",kode:0}),[r,x]=f.useState(),[v,l]=f.useState(""),[j,b]=f.useState(!1),C=t=>{let u;t.target.name==="kode"&&(u=isNaN(Number(t.target.value))?0:Number(t.target.value)),g(k=>({...k,[t.target.name]:t.target.name==="kode"?u:t.target.value}))},y=(t,u)=>{u!=="clickaway"&&l("")},s=async t=>{b(!0),t.preventDefault();const u=ue.safeParse({refrensi_detail_id:o.detailReferensi.id,...c});if(!u.success)return b(!1),x(u.error.flatten().fieldErrors);x({});const k=await w("https://spbe-malkot.onrender.com/api/v1/refrensi_pengguna",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+D.get("authToken")},body:JSON.stringify({refrensi_detail_id:o.detailReferensi.id,...c})});if(!(k!=null&&k.success))return b(!1),l(k.message);g({nama:"",kode:0}),b(!1),z(N=>!N),l("Berhasil menambahkan data"),setTimeout(()=>{h(N=>({...N,create:null}))},2e3)};return e.jsxs(K,{anchorEl:m,open:d,TransitionComponent:Re,slotProps:{paper:{sx:{minWidth:"30em",paddingX:"1em",borderRadius:"0.3em 0em 0em 0.3em",boxShadow:"rgba(0, 0, 0, 0.1) 0px 1px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 2px 0px",border:"1px solid "+p[300]}}},sx:{marginTop:"0.5em"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"start",gap:"0.3em"},children:[e.jsx(Ce,{fontSize:"small",sx:{color:M[800]}}),e.jsx(n,{variant:"subtitle2",sx:{color:M[800]},children:"New Item"})]}),e.jsx(I,{size:"small",color:"secondary",onClick:()=>{h(t=>({...t,create:null}))},children:e.jsx(_,{fontSize:"small"})})]}),e.jsxs(a,{sx:{paddingLeft:"1.5em"},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:"medium",color:p[800]},children:"Referensi Arsitektur"}),e.jsxs(Z,{spacing:.5,sx:{marginTop:"0.5em",paddingLeft:"1em",borderLeft:"1px solid "+p[300]},children:[e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(n,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:p[800]},children:"Induk Referensi"}),e.jsx(n,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:"RAL.0"+o.indukReferensi.kode+" "+o.indukReferensi.nama})]}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(n,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:p[800]},children:"Sub Referensi"}),e.jsx(n,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:"RAL.0"+o.subReferensi.kode+" "+o.subReferensi.nama})]}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(n,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:p[800]},children:"Detail Referensi"}),e.jsx(n,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:"RAL.0"+o.detailReferensi.kode+" "+o.detailReferensi.nama})]})]}),e.jsx(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1em"},children:e.jsxs(n,{variant:"subtitle1",sx:{fontWeight:"medium",color:p[800]},children:["Data"," ",e.jsx(n,{component:"span",fontSize:"0.75em",fontWeight:"light",children:"(Masukkan data sub referensi)"})]})}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:v!=="",autoHideDuration:1500,message:v,onClose:y}),e.jsx(a,{sx:{marginTop:"0.8em"},children:e.jsxs("form",{onSubmit:s,children:[e.jsx(R,{name:"nama",type:"text",label:"Nama",placeholder:"Masukkan nama item referensi",size:"small",autoComplete:"off",fullWidth:!0,InputProps:{sx:{fontSize:"small"}},InputLabelProps:{sx:{fontSize:"small"}},sx:{fontSize:"small",marginBottom:"1em"},value:c.nama,onChange:C,error:!!(r&&r.nama),helperText:r&&r.nama}),e.jsx(R,{name:"kode",type:"text",label:"Kode",placeholder:"Masukkan kode item referensi",size:"small",fullWidth:!0,InputProps:{sx:{fontSize:"small"}},InputLabelProps:{sx:{fontSize:"small"}},sx:{fontSize:"small",marginBottom:"1em"},value:c.kode,onChange:C,error:!!(r&&r.kode),helperText:r&&r.kode}),e.jsx(a,{sx:{display:"flex",justifyContent:"end",marginBottom:"0.5em"},children:e.jsx(L,{type:"submit",variant:"contained",size:"small",sx:{minWidth:"10em"},disabled:!!j,children:j?e.jsx(W,{size:20,color:"secondary"}):"Submit"})})]})})]})]})}const Ie=J.forwardRef(function(m,h){return e.jsx($,{...m,ref:h,direction:"left"})});function Ge(i){const{anchorEl:m,setAnchorEl:h,menuOpen:d,dataReferensi:o,setDataAction:z,detailReferensiItem:c}=i,[g,r]=f.useState({nama:"",kode:0}),[x,v]=f.useState(null),[l,j]=f.useState(),[b,C]=f.useState(""),[y,s]=f.useState(!1),t=S=>{let A;S.target.name==="kode"&&(A=isNaN(Number(S.target.value))?0:Number(S.target.value)),r(P=>({...P,[S.target.name]:S.target.name==="kode"?A:S.target.value}))},u=(S,A)=>{A!=="clickaway"&&C("")},k=async S=>{s(!0),S.preventDefault();const A=xe.safeParse({refrensi_detail_id:o.detailReferensi.id,...g});if(!A.success)return s(!1),j(A.error.flatten().fieldErrors);j({});const P=await w("https://spbe-malkot.onrender.com/api/v1/refrensi_pengguna/"+(x==null?void 0:x.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+D.get("authToken")},body:JSON.stringify({refrensi_detail_id:o.detailReferensi.id,...g})});if(!(P!=null&&P.success))return s(!1),C(P.message);r({nama:"",kode:0}),s(!1),z(O=>!O),C("Berhasil mengubah data"),setTimeout(()=>{h(O=>({...O,update:null}))},2e3)},N=async S=>{s(!0);const A=await w("https://spbe-malkot.onrender.com/api/v1/refrensi_pengguna/"+S,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+D.get("authToken")}});v(A.data),r({nama:A.data.nama,kode:A.data.kode}),s(!1)};return f.useEffect(()=>{N(c.id)},[]),e.jsxs(K,{anchorEl:m,open:d,TransitionComponent:Ie,slotProps:{paper:{sx:{minWidth:"30em",paddingX:"1em",borderRadius:"0.3em 0em 0em 0.3em",boxShadow:"rgba(0, 0, 0, 0.1) 0px 1px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 2px 0px",border:"1px solid "+p[300]}}},sx:{marginTop:"0.5em"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"start",gap:"0.3em"},children:[e.jsx(ze,{fontSize:"small",sx:{color:M[800]}}),e.jsx(n,{variant:"subtitle2",sx:{color:M[800]},children:"Update Item"})]}),e.jsx(I,{size:"small",color:"secondary",onClick:()=>{h(S=>({...S,update:null}))},children:e.jsx(_,{fontSize:"small"})})]}),e.jsxs(a,{sx:{paddingLeft:"1.5em"},children:[e.jsx(n,{variant:"subtitle1",sx:{fontWeight:"medium",color:p[800]},children:"Referensi Arsitektur"}),e.jsxs(Z,{spacing:.5,sx:{marginTop:"0.5em",paddingLeft:"1em",borderLeft:"1px solid "+p[300]},children:[e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(n,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:p[800]},children:"Induk Referensi"}),e.jsx(n,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:o.indukReferensi.nama})]}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(n,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:p[800]},children:"Sub Referensi"}),e.jsx(n,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:o.subReferensi.nama})]}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(n,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:p[800]},children:"Detail Referensi"}),e.jsx(n,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:o.detailReferensi.nama})]})]}),e.jsx(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1em"},children:e.jsxs(n,{variant:"subtitle1",sx:{fontWeight:"medium",color:p[800]},children:["Data"," ",e.jsx(n,{component:"span",fontSize:"0.75em",fontWeight:"light",children:"(Ubah data sub referensi)"})]})}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:b!=="",autoHideDuration:1500,message:b,onClose:u}),e.jsx(a,{sx:{marginTop:"0.8em"},children:e.jsxs("form",{onSubmit:k,children:[e.jsx(R,{name:"nama",type:"text",label:"Nama",placeholder:"Masukkan nama item referensi",size:"small",autoComplete:"off",fullWidth:!0,InputProps:{sx:{fontSize:"small"}},InputLabelProps:{sx:{fontSize:"small"}},sx:{fontSize:"small",marginBottom:"1em"},value:g.nama,onChange:t,error:!!(l&&l.nama),helperText:l&&l.nama}),e.jsx(R,{name:"kode",type:"text",label:"Kode",placeholder:"Masukkan kode item referensi",size:"small",fullWidth:!0,InputProps:{sx:{fontSize:"small"}},InputLabelProps:{sx:{fontSize:"small"}},sx:{fontSize:"small",marginBottom:"1em"},value:g.kode,onChange:t,error:!!(l&&l.kode),helperText:l&&l.kode}),e.jsx(a,{sx:{display:"flex",justifyContent:"end",marginBottom:"0.5em"},children:e.jsx(L,{type:"submit",variant:"contained",size:"small",sx:{minWidth:"10em"},disabled:!!y,children:y?e.jsx(W,{size:20,color:"secondary"}):"Ubah"})})]})})]})]})}export{Ee as A,Ue as D,Le as E,Ve as F,Oe as I,Fe as M,He as a,Ge as b,_e as c};
