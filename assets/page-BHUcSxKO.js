import{J as l,a3 as k,j as e,B as s,a as o,T as p,Y as j,X as v,Z as C,$ as A}from"./index-CpGWNxNa.js";import{A as z}from"./AccountsLayout-tuBCyrxh.js";import{I,S as T,d as P}from"./arsitektur-bisnis-Bgs8Rp8F.js";import{V as B,a as O}from"./VisibilityOff-CKxtevMQ.js";import{B as N}from"./Button-DrUDL9uD.js";import"./useThemeProps-DBl1f4Ct.js";async function E(m){return await(await fetch("https://spbe-malkot.onrender.com/api/v1/auth/masuk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json()}function Y(){const[m,d]=l.useState(!1),[i,b]=l.useState({username:"",password:""}),[t,u]=l.useState(),[x,h]=l.useState(""),[f,c]=l.useState(!1),g=n=>{b(a=>({...a,[n.target.name]:n.target.value}))},w=async n=>{c(!0),n.preventDefault();const a=P.safeParse(i);if(!(a!=null&&a.success))return c(!1),u(a.error.flatten().fieldErrors);u(void 0);const r=await E(i);if(console.info(r),!(r!=null&&r.success)&&"message"in r)return c(!1),h(r.message);c(!1),A.set("authToken",r.data,{expires:new Date(Date.now()+1*60*60*1e3)}),S("/administrator/r-arch/bisnis")},y=(n,a)=>{a!=="clickaway"&&h("")},S=k();return e.jsx(z,{children:e.jsx(s,{component:"div",className:"auth-content",sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs(s,{component:"div",className:"content-wrapper",sx:{border:"1px solid "+o[300],padding:"0em 4em",borderRadius:"0.5em",backgroundColor:"white"},children:[e.jsx(s,{component:"div",className:"kota-malang-icon-wrapper",sx:{display:"flex",justifyContent:"center",marginY:"0.5em"},children:e.jsx(s,{sx:{padding:"1em",border:"1px solid "+o[300],borderRadius:"3em",backgroundColor:"white",boxShadow:"rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px"},children:e.jsx(s,{component:"img",src:"/spbe-malkot/logos/kota-malang-erased.png",width:"2.5em",height:"2.5em"})})}),e.jsx(s,{component:"div",sx:{display:"flex",justifyContent:"center"},children:e.jsxs(s,{sx:{textAlign:"center"},children:[e.jsxs(p,{variant:"h6",sx:{color:o[800]},children:["Sign In as",e.jsx("span",{style:{color:o[800],fontWeight:550,fontStyle:"italic"},children:" Administrator"})]}),e.jsxs(p,{variant:"caption",sx:{lineHeight:"0em",color:o[700]},children:["Tata kelola sistem pemerintahan berbasis ",e.jsx("br",{})," elektronik yang terpadu"]})]})}),e.jsx(s,{component:"div",className:"form-wrapper",sx:{display:"flex",justifyContent:"center",marginY:"2em"},children:e.jsxs(s,{sx:{width:"20em"},children:[e.jsxs("form",{onSubmit:w,children:[e.jsx(j,{type:"text",name:"username",label:"Username",placeholder:"Masukkan username anda",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:i.username,onChange:g,error:!!(t&&t.username),helperText:t&&t.username}),e.jsx(j,{type:m?"text":"password",name:"password",label:"Password",placeholder:"Masukkan password anda",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"},endAdornment:e.jsx(I,{position:"end",children:e.jsx(v,{size:"small",onClick:()=>d(n=>!n),sx:{padding:0},children:m?e.jsx(B,{fontSize:"small"}):e.jsx(O,{fontSize:"small"})})})},sx:{marginBottom:"1.75em"},value:i.password,onChange:g,error:!!(t&&t.password),helperText:t&&t.password}),e.jsx(s,{children:e.jsx(N,{type:"submit",variant:"contained",fullWidth:!0,sx:{textTransform:"none"},disabled:f,children:f?e.jsx(C,{size:20,color:"inherit"}):"Sign In"})})]}),e.jsxs(p,{component:"div",variant:"caption",sx:{color:o[600],marginTop:"1em",textAlign:"center"},children:["Â©2024 Kota Malang"," "]}),e.jsx(T,{anchorOrigin:{horizontal:"right",vertical:"top"},open:!!x,message:x,autoHideDuration:2e3,onClose:y})]})})]})})})}export{Y as default};
