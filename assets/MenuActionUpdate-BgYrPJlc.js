import{z as ee,E as te,H as ae,T as i,J as h,K as se,M as ne,j as e,_ as ie,O as re,P as oe,h as T,B as a,a as g,X as R,Y as B,Z as L,$ as I,a6 as le,l as M,a7 as K,c as de,d as H,a8 as V,a9 as F,aa as U,ab as q,ac as me,ad as Y,ae as J}from"./index-DyErgHkj.js";import{S as G}from"./Skeleton-D3WzhggV.js";import{S as E,B as $,a as ce,b as ue,c as xe}from"./arsitektur-bisnis-BR1u1c-0.js";import{D as X,C as W,F as P,c as he,S as Z}from"./request-helpers-BQxCq-ex.js";import{A as Q,D}from"./DashboardAdminLayout-BIdVf92w.js";import{B as _}from"./Button-BwFa39Ev.js";function pe(n){return ee("MuiAlertTitle",n)}te("MuiAlertTitle",["root"]);const fe=["className"],ge=n=>{const{classes:x}=n;return oe({root:["root"]},pe,x)},je=ae(i,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(n,x)=>x.root})(({theme:n})=>({fontWeight:n.typography.fontWeightMedium,marginTop:-2})),Ee=h.forwardRef(function(x,f){const d=se({props:x,name:"MuiAlertTitle"}),{className:l}=d,v=ne(d,fe),c=d,j=ge(c);return e.jsx(je,ie({gutterBottom:!0,component:"div",ownerState:c,ref:f,className:re(j.root,l)},v))}),be=T(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRightOutlined"),ke=T(e.jsx("path",{d:"M20 6h-8l-2-2H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2m-1 8h-3v3h-2v-3h-3v-2h3V9h2v3h3z"}),"CreateNewFolder"),We=T(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline"),Se=T(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),ze=T(e.jsx("path",{d:"M12 22H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2v6h-2v-2H5v10h7zm10.13-5.01.71-.71c.39-.39.39-1.02 0-1.41l-.71-.71a.9959.9959 0 0 0-1.41 0l-.71.71zm-.71.71-5.3 5.3H14v-2.12l5.3-5.3z"}),"EditCalendar"),_e=T(e.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNoteOutlined"),ve=T(e.jsx("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder"),ye=T(e.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen"),Oe=T(e.jsx("path",{d:"M9 3 5 6.99h3V14h2V6.99h3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99z"}),"ImportExport"),Ae=T(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreHoriz"),Ce=T(e.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 14h-3v3h-2v-3H8v-2h3v-3h2v3h3zm-3-7V3.5L18.5 9z"}),"NoteAdd");function He({sxProps:n}){const x=[{text:"RAB.01 PERTAHANAN DAN LUAR NEGERI"},{text:"RAB.02 EKONOMI DAN INDUSTRI"},{text:"RAB.03 PEMBANGUNAN KEWILAYAHAN"},{text:"RAB.04 PERLINDUNGAN SOSIAL DAN KESEHATAN"},{text:"RAB.05 KETERTIBAN UMUM DAN KESELAMATAN"},{text:"RAB.06 PENDIDIKAN DAN TENAGA KERJA"},{text:"RAB.07 LINGKUNGAN DAN SUMBER DAYA ALAM"},{text:"RAB.08 BUDAYA DAN AGAMA"},{text:"RAB.09 PEMERINTAHAN UMUM"}];return e.jsx(a,{component:"div",className:"skeleton-folder-card",sx:{width:"100%",height:"90vh",overflow:"hidden"},children:x.map((f,d)=>e.jsxs(a,{component:"div",sx:{display:"flex",gap:"0 0.5em",alignItems:"center",marginTop:d===0?void 0:"0.5em",marginBottom:d===x.length-1?void 0:"0.5em",paddingLeft:"2em",paddingY:"0.5em",boxShadow:g[300]+" 0px 1px 4px",borderRadius:"0.3em",...n},children:[e.jsx(a,{component:"div",children:e.jsx(G,{variant:"rectangular",width:"2em",height:"1.5em",sx:{borderRadius:"0.3em"}})}),e.jsxs(a,{component:"div",children:[e.jsx(G,{variant:"text",children:e.jsx(i,{variant:"subtitle1",children:f.text})}),e.jsx(G,{children:e.jsx(i,{variant:"caption",children:"Created at Fri Sep 13 2024"})})]})]},d))})}function Ne({folderLevel:n,dataRef:x,openDialog:f,setOpenDialog:d}){const[l,v]=h.useState({nama:"",kode:0}),[c,j]=h.useState(!1),[r,p]=h.useState(),[C,m]=h.useState(""),z=s=>{switch(s){case"1":return"Sub Referensi";case"2":return"Detail Referensi";default:return"Doesn't match any folder level"}},S=s=>{let t;s.target.name==="kode"&&(t=isNaN(Number(s.target.value))?0:Number(s.target.value)),v(o=>({...o,[s.target.name]:s.target.name==="kode"?t:s.target.value}))},N=(s,t)=>{t!=="clickaway"&&m("")},b=async s=>{let t,o;s.preventDefault(),j(!0);const u=$.safeParse(l);if(!u.success)return j(!1),p(u.error.flatten().fieldErrors);switch(p({}),n){case"1":t="sub_refrensi",o="induk_refrensi_id";break;case"2":t="refrensi_detail",o="sub_refrensi_id";break;default:return m("Invalid folder level")}const y=await P("https://spbe-malkot.onrender.com/api/v1/"+t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I.get("authToken")},body:JSON.stringify({[o]:x.id,...l})});return y.success?(j(!1),v({nama:"",kode:0}),m("Data berhasil ditambahkan"),setTimeout(()=>{d(k=>({...k,create:!1}))},2e3)):(j(!1),m(y.message))};return e.jsx(X,{open:f,onClose:()=>d(s=>({...s,create:!1})),PaperProps:{sx:{borderRadius:"0.3em",minWidth:"25em"}},children:e.jsxs(a,{component:"div",className:"dialog-content-container",children:[e.jsxs(a,{component:"div",className:"dialog-content-header",sx:{display:"flex",padding:"0.5em 0"},children:[e.jsxs(a,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(Q,{fontSize:"small",color:"primary",sx:{marginX:"0.5em"}}),e.jsx(i,{variant:"subtitle1",sx:{fontWeight:550,color:g[700]},children:z(n)+" Arsitektur"})]}),e.jsx(R,{onClick:()=>d(s=>({...s,create:!1})),children:e.jsx(W,{fontSize:"small"})})]}),e.jsx(D,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsxs(a,{component:"div",className:"dialog-content-body",sx:{paddingX:"0.7em"},children:[e.jsxs(i,{variant:"subtitle2",sx:{marginBottom:"0.75em"},children:["Data ",e.jsx("span",{style:{fontSize:"0.75em",fontStyle:"italic"},children:"(Masukkan data referensi)"})]}),e.jsxs("form",{onSubmit:b,children:[e.jsx(B,{type:"text",name:"nama",label:"Nama "+z(n),placeholder:"Masukkan nama induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:l.nama,onChange:S,error:!!(r!=null&&r.nama),helperText:r&&r.nama}),e.jsx(B,{type:"text",name:"kode",label:"Kode "+z(n),placeholder:"Masukkan kode induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:l.kode,onChange:S,error:!!(r!=null&&r.kode),helperText:r&&r.kode}),e.jsx(D,{orientation:"horizontal",sx:{marginY:"0.5em"}}),e.jsx(a,{sx:{textAlign:"end",marginBottom:"0.75em"},children:e.jsx(_,{type:"submit",size:"small",variant:"contained",sx:{minWidth:"10em"},disabled:c,children:c?e.jsx(L,{size:20,sx:{color:"inherit"}}):"Submit"})})]}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:C!=="",autoHideDuration:1500,message:C,onClose:N})]})]})})}function Te({folderLevel:n,dataRef:x,openDialog:f,setOpenDialog:d,setDataAction:l}){const[v,c]=h.useState({nama:x.nama,kode:x.kode}),[j,r]=h.useState(!1),[p,C]=h.useState(),[m,z]=h.useState(""),S=t=>{switch(t){case"1":return"Induk Referensi";case"2":return"Sub Referensi";case"3":return"Detail Referensi";default:return"Doesn't match any folder level"}},N=t=>{let o;t.target.name==="kode"&&(o=isNaN(Number(t.target.value))?0:Number(t.target.value)),c(u=>({...u,[t.target.name]:t.target.name==="kode"?o:t.target.value}))},b=(t,o)=>{o!=="clickaway"&&z("")},s=async t=>{let o,u;t.preventDefault(),r(!0);const y=$.safeParse(v);if(!y.success)return r(!1),C(y.error.flatten().fieldErrors);switch(C({}),n){case"1":o="induk_refrensi",u="refrensi_arsitektur_id";break;case"2":o="sub_refrensi",u="induk_refrensi_id";break;case"3":o="refrensi_detail",u="sub_refrensi_id";break;default:return z("Invalid folder level")}const k=await P("https://spbe-malkot.onrender.com/api/v1/"+o+"/"+x.id,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I.get("authToken")},body:JSON.stringify({[u]:x[u],...v})});return console.info("request update 	:",k),k.success?(r(!1),l(A=>!A),z("Data berhasil diubah"),setTimeout(()=>{d(A=>({...A,update:!1}))},2e3)):(r(!1),z(k.message))};return e.jsx(X,{open:f,onClose:()=>d(t=>({...t,update:!1})),PaperProps:{sx:{borderRadius:"0.3em",minWidth:"25em"}},children:e.jsxs(a,{component:"div",className:"dialog-content-container",children:[e.jsxs(a,{component:"div",className:"dialog-content-header",sx:{display:"flex",padding:"0.5em 0"},children:[e.jsxs(a,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(Q,{fontSize:"small",color:"primary",sx:{marginX:"0.5em"}}),e.jsx(i,{variant:"subtitle1",sx:{fontWeight:550,color:g[700]},children:S(n)+" Arsitektur"})]}),e.jsx(R,{onClick:()=>d(t=>({...t,update:!1})),children:e.jsx(W,{fontSize:"small"})})]}),e.jsx(D,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsxs(a,{component:"div",className:"dialog-content-body",sx:{paddingX:"0.7em"},children:[e.jsxs(i,{variant:"subtitle2",sx:{marginBottom:"0.75em"},children:["Data ",e.jsx("span",{style:{fontSize:"0.75em",fontStyle:"italic"},children:"(Masukkan data referensi)"})]}),e.jsxs("form",{onSubmit:s,children:[e.jsx(B,{type:"text",name:"nama",label:"Nama "+S(n),placeholder:"Masukkan nama induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:v.nama,onChange:N,error:!!(p!=null&&p.nama),helperText:p&&p.nama}),e.jsx(B,{type:"text",name:"kode",label:"Kode "+S(n),placeholder:"Masukkan kode induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:v.kode,onChange:N,error:!!(p!=null&&p.kode),helperText:p&&p.kode}),e.jsx(D,{orientation:"horizontal",sx:{marginY:"0.5em"}}),e.jsx(a,{sx:{textAlign:"end",marginBottom:"0.75em"},children:e.jsx(_,{type:"submit",size:"small",variant:"contained",sx:{minWidth:"10em"},disabled:j,children:j?e.jsx(L,{size:20,sx:{color:"inherit"}}):"Submit"})})]}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:m!=="",autoHideDuration:1500,message:m,onClose:b})]})]})})}function Ve({folderLevel:n,folderSxProps:x,collapseHandler:f,dataRef:d,collapseState:l,kodeReferensiArsitektur:v,setDataAction:c}){const[j,r]=h.useState(null),p=!!j,[C,m]=h.useState({create:!1,update:!1}),[z,S]=h.useState(""),[N,b]=h.useState(!1),s=(u,y)=>{y!=="clickaway"&&S("")},t=u=>async()=>{b(!0);let y;switch(n){case"1":y="induk_refrensi";break;case"2":y="sub_refrensi";break;case"3":y="refrensi_detail";break;default:return b(!1),S("Invalid Folder Referensi")}const k=await P("https://spbe-malkot.onrender.com/api/v1/"+y+"/"+u,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I.get("authToken")}});return console.log("reques deletion 	:",k),k.success?(c(A=>!A),b(!1),S("Berhasil menghapus referensi")):(b(!1),S("Gagal, masih terdapat item di dalam referensi"))},o=`${d.nama}#${d.kode}`;return e.jsxs(a,{component:"div",className:"induk-referensi-item",sx:{display:"flex",gap:"0 0.5em",alignItems:"center",padding:"0.5em 0em",borderRadius:"0.3em",boxShadow:"rgba(0, 0, 0, 0.16) 0px 1px 4px",...x},children:[e.jsx(R,{size:"small",onClick:f(o),children:l[o]?e.jsx(le,{fontSize:"small",sx:{color:g[600]}}):e.jsx(be,{fontSize:"small",sx:{color:g[600]}})}),e.jsx(a,{component:"div",children:l[o]?e.jsx(ye,{fontSize:"large",sx:{color:M[400]}}):e.jsx(ve,{fontSize:"large",sx:{color:M[400]}})}),e.jsxs(a,{sx:{flexGrow:1},children:[e.jsx(i,{component:"div",variant:"subtitle2",sx:{color:g[700],cursor:"pointer"},onClick:f(o),children:v+" "+d.nama}),e.jsxs(a,{component:"div",className:"time-info",sx:{display:"flex"},children:[e.jsx(i,{variant:"caption",sx:{color:g[500],fontStyle:"italic"},children:`Created at ${new Date(d.created_at).toDateString()}`}),e.jsx(D,{orientation:"vertical",flexItem:!0,sx:{marginX:"0.5em"}}),e.jsx(i,{variant:"caption",sx:{color:g[500],fontStyle:"italic"},children:`Updated at ${new Date(d.updated_at).toDateString()}`})]})]}),e.jsxs(a,{component:"div",className:"count-sub-referensi",children:[e.jsx(R,{onClick:u=>{r(u.currentTarget)},children:e.jsx(Ae,{})}),e.jsx(K,{open:p,anchorEl:j,onClose:()=>r(null),slotProps:{paper:{sx:{minWidth:"10em",boxShadow:"none",border:`1px solid ${g[400]}`,borderRadius:"0.3em"}}},children:e.jsxs(de,{disablePadding:!0,children:[n==="3"?"":e.jsx(H,{disableGutters:!0,disablePadding:!0,children:e.jsxs(V,{sx:{padding:"0.2em 1em"},onClick:()=>m(u=>({...u,create:!0})),children:[e.jsx(F,{sx:{paddingRight:"0.5em"},children:e.jsx(ke,{fontSize:"small"})}),e.jsx(U,{primary:e.jsxs(i,{variant:"caption",children:[n==="1"&&"Tambah Level 2",n==="2"&&"Tambah Level 3"]})})]})}),e.jsx(H,{disableGutters:!0,disablePadding:!0,children:e.jsxs(V,{sx:{padding:"0.2em 1em"},onClick:()=>m(u=>({...u,update:!0})),children:[e.jsx(F,{sx:{paddingRight:"0.5em"},children:e.jsx(Se,{fontSize:"small"})}),e.jsx(U,{primary:e.jsx(i,{variant:"caption",children:"Ubah Data"})})]})}),e.jsx(H,{disableGutters:!0,disablePadding:!0,children:e.jsxs(V,{sx:{padding:"0.2em 1em",color:q[300]},disabled:N,onClick:t(d.id),children:[e.jsx(F,{sx:{paddingRight:"0.5em"},children:N?e.jsx(L,{size:20,color:"inherit"}):e.jsx(he,{fontSize:"small",sx:{color:q[300]}})}),e.jsx(U,{primary:e.jsx(i,{variant:"caption",children:"Hapus Data"})})]})})]})}),e.jsx(Te,{folderLevel:n,setDataAction:c,dataRef:d,openDialog:C.update,setOpenDialog:m}),e.jsx(Ne,{folderLevel:n,dataRef:d,openDialog:C.create,setOpenDialog:m}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:z!=="",autoHideDuration:1500,message:z,onClose:s})]})]})}function Fe({referensiArsitekturId:n,openDialog:x,setOpenDialog:f,setDataAction:d}){const[l,v]=h.useState({nama:"",kode:0}),[c,j]=h.useState(),[r,p]=h.useState(""),[C,m]=h.useState(!1),z=b=>{let s;b.target.name==="kode"&&(s=isNaN(Number(b.target.value))?0:Number(b.target.value)),v(t=>({...t,[b.target.name]:b.target.name==="kode"?s:b.target.value}))},S=(b,s)=>{s!=="clickaway"&&p("")},N=async b=>{m(!0),b.preventDefault();const s=ce.safeParse({refrensi_arsitektur_id:n,...l});if(!s.success)return m(!1),console.info(s.error.flatten().fieldErrors),j(s.error.flatten().fieldErrors);j({});const t=await P("https://spbe-malkot.onrender.com/api/v1/induk_refrensi",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I.get("authToken")},body:JSON.stringify({refrensi_arsitektur_id:n,...l})});return console.info("Validated Data 	: ",s.data),t.success?(m(!1),v({nama:"",kode:0}),p("Berhasil menambahkan data"),setTimeout(()=>{f(!1)},2e3),d(o=>!o)):(m(!1),console.info("request fail 	: ",t),p(t.message))};return e.jsx(X,{open:x,onClose:()=>f(!1),PaperProps:{sx:{borderRadius:"0.3em",minWidth:"25em"}},children:e.jsxs(a,{component:"div",className:"dialog-content-container",children:[e.jsxs(a,{component:"div",className:"dialog-content-header",sx:{display:"flex",padding:"0.5em 0"},children:[e.jsxs(a,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(me,{fontSize:"small",color:"primary",sx:{marginX:"0.5em"}}),e.jsx(i,{variant:"subtitle1",sx:{fontWeight:550,color:g[700]},children:"Induk Referensi Arsitektur"})]}),e.jsx(R,{onClick:()=>f(!1),children:e.jsx(W,{fontSize:"small"})})]}),e.jsx(D,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsxs(a,{component:"div",className:"dialog-content-body",sx:{paddingX:"0.7em"},children:[e.jsxs(i,{variant:"subtitle2",sx:{marginBottom:"0.75em"},children:["Data ",e.jsx("span",{style:{fontSize:"0.75em",fontStyle:"italic"},children:"(Masukkan data induk referensi)"})]}),e.jsxs("form",{onSubmit:N,children:[e.jsx(B,{type:"text",name:"nama",label:"Nama Induk Referensi",placeholder:"Masukkan nama induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:l.nama,onChange:z,error:!!(c!=null&&c.nama),helperText:c&&c.nama}),e.jsx(B,{type:"text",name:"kode",label:"Kode Induk Referensi",placeholder:"Masukkan kode induk referensi",size:"small",autoComplete:"off",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:l.kode,onChange:z,error:!!(c!=null&&c.kode),helperText:c&&c.kode}),e.jsx(D,{orientation:"horizontal",sx:{marginY:"0.5em"}}),e.jsx(a,{sx:{textAlign:"end",marginBottom:"0.75em"},children:e.jsx(_,{type:"submit",size:"small",variant:"contained",sx:{minWidth:"10em"},disabled:C,children:C?e.jsx(L,{size:20,sx:{color:"inherit"}}):"Submit"})})]}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:r!=="",autoHideDuration:1500,message:r,onClose:S})]})]})})}const Be=Y.forwardRef(function(x,f){return e.jsx(J,{...x,ref:f,direction:"left"})});function Ue(n){const{anchorEl:x,setAnchorEl:f,menuOpen:d,dataReferensi:l,setDataAction:v}=n,[c,j]=h.useState({nama:"",kode:0}),[r,p]=h.useState(),[C,m]=h.useState(""),[z,S]=h.useState(!1),N=t=>{let o;t.target.name==="kode"&&(o=isNaN(Number(t.target.value))?0:Number(t.target.value)),j(u=>({...u,[t.target.name]:t.target.name==="kode"?o:t.target.value}))},b=(t,o)=>{o!=="clickaway"&&m("")},s=async t=>{S(!0),t.preventDefault();const o=ue.safeParse({refrensi_detail_id:l.detailReferensi.id,...c});if(!o.success)return S(!1),p(o.error.flatten().fieldErrors);p({});const u=await P("https://spbe-malkot.onrender.com/api/v1/refrensi_pengguna",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I.get("authToken")},body:JSON.stringify({refrensi_detail_id:l.detailReferensi.id,...c})});if(!(u!=null&&u.success))return S(!1),m(u.message);j({nama:"",kode:0}),S(!1),v(y=>!y),m("Berhasil menambahkan data"),setTimeout(()=>{f(y=>({...y,create:null}))},2e3)};return e.jsxs(K,{anchorEl:x,open:d,TransitionComponent:Be,slotProps:{paper:{sx:{minWidth:"30em",paddingX:"1em",borderRadius:"0.3em 0em 0em 0.3em",boxShadow:"rgba(0, 0, 0, 0.1) 0px 1px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 2px 0px",border:"1px solid "+g[300]}}},sx:{marginTop:"0.5em"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"start",gap:"0.3em"},children:[e.jsx(Ce,{fontSize:"small",sx:{color:M[800]}}),e.jsx(i,{variant:"subtitle2",sx:{color:M[800]},children:"New Item"})]}),e.jsx(R,{size:"small",color:"secondary",onClick:()=>{f(t=>({...t,create:null}))},children:e.jsx(W,{fontSize:"small"})})]}),e.jsxs(a,{sx:{paddingLeft:"1.5em"},children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:"medium",color:g[800]},children:"Referensi Arsitektur"}),e.jsxs(Z,{spacing:.5,sx:{marginTop:"0.5em",paddingLeft:"1em",borderLeft:"1px solid "+g[300]},children:[e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(i,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:g[800]},children:"Level 1"}),e.jsx(i,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:"RAL.0"+l.indukReferensi.kode+" "+l.indukReferensi.nama})]}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(i,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:g[800]},children:"Level 2"}),e.jsx(i,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:"RAL.0"+l.subReferensi.kode+" "+l.subReferensi.nama})]}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(i,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:g[800]},children:"Level 3"}),e.jsx(i,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:"RAL.0"+l.detailReferensi.kode+" "+l.detailReferensi.nama})]})]}),e.jsx(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1em"},children:e.jsxs(i,{variant:"subtitle1",sx:{fontWeight:"medium",color:g[800]},children:["Data"," ",e.jsx(i,{component:"span",fontSize:"0.75em",fontWeight:"light",children:"(Masukkan data sub referensi)"})]})}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:C!=="",autoHideDuration:1500,message:C,onClose:b}),e.jsx(a,{sx:{marginTop:"0.8em"},children:e.jsxs("form",{onSubmit:s,children:[e.jsx(B,{name:"nama",type:"text",label:"Nama",placeholder:"Masukkan nama item referensi",size:"small",autoComplete:"off",fullWidth:!0,InputProps:{sx:{fontSize:"small"}},InputLabelProps:{sx:{fontSize:"small"}},sx:{fontSize:"small",marginBottom:"1em"},value:c.nama,onChange:N,error:!!(r&&r.nama),helperText:r&&r.nama}),e.jsx(B,{name:"kode",type:"text",label:"Kode",placeholder:"Masukkan kode item referensi",size:"small",fullWidth:!0,InputProps:{sx:{fontSize:"small"}},InputLabelProps:{sx:{fontSize:"small"}},sx:{fontSize:"small",marginBottom:"1em"},value:c.kode,onChange:N,error:!!(r&&r.kode),helperText:r&&r.kode}),e.jsx(a,{sx:{display:"flex",justifyContent:"end",marginBottom:"0.5em"},children:e.jsx(_,{type:"submit",variant:"contained",size:"small",sx:{minWidth:"10em"},disabled:!!z,children:z?e.jsx(L,{size:20,color:"secondary"}):"Submit"})})]})})]})]})}const Re=Y.forwardRef(function(x,f){return e.jsx(J,{...x,ref:f,direction:"left"})});function Ge(n){const{anchorEl:x,setAnchorEl:f,menuOpen:d,dataReferensi:l,setDataAction:v,detailReferensiItem:c}=n,[j,r]=h.useState({nama:"",kode:0}),[p,C]=h.useState(null),[m,z]=h.useState(),[S,N]=h.useState(""),[b,s]=h.useState(!1),t=k=>{let A;k.target.name==="kode"&&(A=isNaN(Number(k.target.value))?0:Number(k.target.value)),r(w=>({...w,[k.target.name]:k.target.name==="kode"?A:k.target.value}))},o=(k,A)=>{A!=="clickaway"&&N("")},u=async k=>{s(!0),k.preventDefault();const A=xe.safeParse({refrensi_detail_id:l.detailReferensi.id,...j});if(!A.success)return s(!1),z(A.error.flatten().fieldErrors);z({});const w=await P("https://spbe-malkot.onrender.com/api/v1/refrensi_pengguna/"+(p==null?void 0:p.id),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I.get("authToken")},body:JSON.stringify({refrensi_detail_id:l.detailReferensi.id,...j})});if(!(w!=null&&w.success))return s(!1),N(w.message);r({nama:"",kode:0}),s(!1),v(O=>!O),N("Berhasil mengubah data"),setTimeout(()=>{f(O=>({...O,update:null}))},2e3)},y=async k=>{s(!0);const A=await P("https://spbe-malkot.onrender.com/api/v1/refrensi_pengguna/"+k,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+I.get("authToken")}});C(A.data),r({nama:A.data.nama,kode:A.data.kode}),s(!1)};return h.useEffect(()=>{y(c.id)},[]),e.jsxs(K,{anchorEl:x,open:d,TransitionComponent:Re,slotProps:{paper:{sx:{minWidth:"30em",paddingX:"1em",borderRadius:"0.3em 0em 0em 0.3em",boxShadow:"rgba(0, 0, 0, 0.1) 0px 1px 3px 0px, rgba(0, 0, 0, 0.06) 0px 1px 2px 0px",border:"1px solid "+g[300]}}},sx:{marginTop:"0.5em"},children:[e.jsxs(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(a,{sx:{display:"flex",alignItems:"start",gap:"0.3em"},children:[e.jsx(ze,{fontSize:"small",sx:{color:M[800]}}),e.jsx(i,{variant:"subtitle2",sx:{color:M[800]},children:"Update Item"})]}),e.jsx(R,{size:"small",color:"secondary",onClick:()=>{f(k=>({...k,update:null}))},children:e.jsx(W,{fontSize:"small"})})]}),e.jsxs(a,{sx:{paddingLeft:"1.5em"},children:[e.jsx(i,{variant:"subtitle1",sx:{fontWeight:"medium",color:g[800]},children:"Referensi Arsitektur"}),e.jsxs(Z,{spacing:.5,sx:{marginTop:"0.5em",paddingLeft:"1em",borderLeft:"1px solid "+g[300]},children:[e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(i,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:g[800]},children:"Level 1"}),e.jsx(i,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:l.indukReferensi.nama})]}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(i,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:g[800]},children:"Level 2"}),e.jsx(i,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:l.subReferensi.nama})]}),e.jsxs(a,{sx:{display:"flex"},children:[e.jsx(i,{sx:{fontSize:"0.75em",width:"10em",fontWeight:"medium",color:g[800]},children:"Level 3"}),e.jsx(i,{sx:{fontSize:"0.75em",fontWeight:"light",flexGrow:1},children:l.detailReferensi.nama})]})]}),e.jsx(a,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1em"},children:e.jsxs(i,{variant:"subtitle1",sx:{fontWeight:"medium",color:g[800]},children:["Data"," ",e.jsx(i,{component:"span",fontSize:"0.75em",fontWeight:"light",children:"(Ubah data sub referensi)"})]})}),e.jsx(E,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:S!=="",autoHideDuration:1500,message:S,onClose:o}),e.jsx(a,{sx:{marginTop:"0.8em"},children:e.jsxs("form",{onSubmit:u,children:[e.jsx(B,{name:"nama",type:"text",label:"Nama",placeholder:"Masukkan nama item referensi",size:"small",autoComplete:"off",fullWidth:!0,InputProps:{sx:{fontSize:"small"}},InputLabelProps:{sx:{fontSize:"small"}},sx:{fontSize:"small",marginBottom:"1em"},value:j.nama,onChange:t,error:!!(m&&m.nama),helperText:m&&m.nama}),e.jsx(B,{name:"kode",type:"text",label:"Kode",placeholder:"Masukkan kode item referensi",size:"small",fullWidth:!0,InputProps:{sx:{fontSize:"small"}},InputLabelProps:{sx:{fontSize:"small"}},sx:{fontSize:"small",marginBottom:"1em"},value:j.kode,onChange:t,error:!!(m&&m.kode),helperText:m&&m.kode}),e.jsx(a,{sx:{display:"flex",justifyContent:"end",marginBottom:"0.5em"},children:e.jsx(_,{type:"submit",variant:"contained",size:"small",sx:{minWidth:"10em"},disabled:!!b,children:b?e.jsx(L,{size:20,color:"secondary"}):"Ubah"})})]})})]})]})}export{Ee as A,Fe as D,_e as E,Ve as F,Oe as I,Ue as M,He as a,Ge as b,We as c};
