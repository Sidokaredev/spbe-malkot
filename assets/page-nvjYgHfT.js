import{h as U,j as e,E as fe,z as he,H as ie,e as d,_ as R,U as B,J as p,K as be,M as ve,v as Ce,W as ae,O as L,P as je,B as u,T as v,a as S,X as A,Y as _,Z as G,$ as E,a0 as oe,a1 as te,a2 as ne,l as q}from"./index-DyErgHkj.js";import{D as M,a as ye,T as le}from"./DashboardAdminLayout-BIdVf92w.js";import{D as ce,C as de,S as pe,F as W,a as ze,b as ke,A as Se,c as $e,d as Ie,I as Pe}from"./request-helpers-BQxCq-ex.js";import{T as Te}from"./TableBodyReferensiPenggunaSkeleton-Zv5b6-5r.js";import{I as V,S as J,U as Be,C as Re}from"./arsitektur-bisnis-BR1u1c-0.js";import{B as w}from"./Button-BwFa39Ev.js";import{M as se,T as _e,a as Ne,b as De,c as Oe,d as Le}from"./TablePagination-CzqDPl5F.js";import{V as Ee,a as We}from"./VisibilityOff-DLamIM1W.js";import{a as X,T as k}from"./TableRow-CNuvr_lu.js";import"./Skeleton-D3WzhggV.js";import"./dividerClasses-5Yj2gWGd.js";import"./useThemeProps-BLsYwCNi.js";const Ae={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64"},Me=U(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Ve(a){return he("MuiChip",a)}const s=fe("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),we=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],Ue=a=>{const{classes:o,disabled:h,size:t,color:r,iconColor:y,onDelete:x,clickable:g,variant:f}=a,i={root:["root",f,h&&"disabled",`size${d(t)}`,`color${d(r)}`,g&&"clickable",g&&`clickableColor${d(r)}`,x&&"deletable",x&&`deletableColor${d(r)}`,`${f}${d(r)}`],label:["label",`label${d(t)}`],avatar:["avatar",`avatar${d(t)}`,`avatarColor${d(r)}`],icon:["icon",`icon${d(t)}`,`iconColor${d(y)}`],deleteIcon:["deleteIcon",`deleteIcon${d(t)}`,`deleteIconColor${d(r)}`,`deleteIcon${d(f)}Color${d(r)}`]};return je(i,Ve,o)},Fe=ie("div",{name:"MuiChip",slot:"Root",overridesResolver:(a,o)=>{const{ownerState:h}=a,{color:t,iconColor:r,clickable:y,onDelete:x,size:g,variant:f}=h;return[{[`& .${s.avatar}`]:o.avatar},{[`& .${s.avatar}`]:o[`avatar${d(g)}`]},{[`& .${s.avatar}`]:o[`avatarColor${d(t)}`]},{[`& .${s.icon}`]:o.icon},{[`& .${s.icon}`]:o[`icon${d(g)}`]},{[`& .${s.icon}`]:o[`iconColor${d(r)}`]},{[`& .${s.deleteIcon}`]:o.deleteIcon},{[`& .${s.deleteIcon}`]:o[`deleteIcon${d(g)}`]},{[`& .${s.deleteIcon}`]:o[`deleteIconColor${d(t)}`]},{[`& .${s.deleteIcon}`]:o[`deleteIcon${d(f)}Color${d(t)}`]},o.root,o[`size${d(g)}`],o[`color${d(t)}`],y&&o.clickable,y&&t!=="default"&&o[`clickableColor${d(t)})`],x&&o.deletable,x&&t!=="default"&&o[`deletableColor${d(t)}`],o[f],o[`${f}${d(t)}`]]}})(({theme:a,ownerState:o})=>{const h=a.palette.mode==="light"?a.palette.grey[700]:a.palette.grey[300];return R({maxWidth:"100%",fontFamily:a.typography.fontFamily,fontSize:a.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(a.vars||a).palette.text.primary,backgroundColor:(a.vars||a).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:a.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${s.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${s.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:a.vars?a.vars.palette.Chip.defaultAvatarColor:h,fontSize:a.typography.pxToRem(12)},[`& .${s.avatarColorPrimary}`]:{color:(a.vars||a).palette.primary.contrastText,backgroundColor:(a.vars||a).palette.primary.dark},[`& .${s.avatarColorSecondary}`]:{color:(a.vars||a).palette.secondary.contrastText,backgroundColor:(a.vars||a).palette.secondary.dark},[`& .${s.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:a.typography.pxToRem(10)},[`& .${s.icon}`]:R({marginLeft:5,marginRight:-6},o.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},o.iconColor===o.color&&R({color:a.vars?a.vars.palette.Chip.defaultIconColor:h},o.color!=="default"&&{color:"inherit"})),[`& .${s.deleteIcon}`]:R({WebkitTapHighlightColor:"transparent",color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.26)`:B(a.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:a.vars?`rgba(${a.vars.palette.text.primaryChannel} / 0.4)`:B(a.palette.text.primary,.4)}},o.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},o.color!=="default"&&{color:a.vars?`rgba(${a.vars.palette[o.color].contrastTextChannel} / 0.7)`:B(a.palette[o.color].contrastText,.7),"&:hover, &:active":{color:(a.vars||a).palette[o.color].contrastText}})},o.size==="small"&&{height:24},o.color!=="default"&&{backgroundColor:(a.vars||a).palette[o.color].main,color:(a.vars||a).palette[o.color].contrastText},o.onDelete&&{[`&.${s.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:B(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)}},o.onDelete&&o.color!=="default"&&{[`&.${s.focusVisible}`]:{backgroundColor:(a.vars||a).palette[o.color].dark}})},({theme:a,ownerState:o})=>R({},o.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:B(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity)},[`&.${s.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selectedChannel} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:B(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},"&:active":{boxShadow:(a.vars||a).shadows[1]}},o.clickable&&o.color!=="default"&&{[`&:hover, &.${s.focusVisible}`]:{backgroundColor:(a.vars||a).palette[o.color].dark}}),({theme:a,ownerState:o})=>R({},o.variant==="outlined"&&{backgroundColor:"transparent",border:a.vars?`1px solid ${a.vars.palette.Chip.defaultBorder}`:`1px solid ${a.palette.mode==="light"?a.palette.grey[400]:a.palette.grey[700]}`,[`&.${s.clickable}:hover`]:{backgroundColor:(a.vars||a).palette.action.hover},[`&.${s.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`& .${s.avatar}`]:{marginLeft:4},[`& .${s.avatarSmall}`]:{marginLeft:2},[`& .${s.icon}`]:{marginLeft:4},[`& .${s.iconSmall}`]:{marginLeft:2},[`& .${s.deleteIcon}`]:{marginRight:5},[`& .${s.deleteIconSmall}`]:{marginRight:3}},o.variant==="outlined"&&o.color!=="default"&&{color:(a.vars||a).palette[o.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / 0.7)`:B(a.palette[o.color].main,.7)}`,[`&.${s.clickable}:hover`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.hoverOpacity})`:B(a.palette[o.color].main,a.palette.action.hoverOpacity)},[`&.${s.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / ${a.vars.palette.action.focusOpacity})`:B(a.palette[o.color].main,a.palette.action.focusOpacity)},[`& .${s.deleteIcon}`]:{color:a.vars?`rgba(${a.vars.palette[o.color].mainChannel} / 0.7)`:B(a.palette[o.color].main,.7),"&:hover, &:active":{color:(a.vars||a).palette[o.color].main}}})),He=ie("span",{name:"MuiChip",slot:"Label",overridesResolver:(a,o)=>{const{ownerState:h}=a,{size:t}=h;return[o.label,o[`label${d(t)}`]]}})(({ownerState:a})=>R({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},a.variant==="outlined"&&{paddingLeft:11,paddingRight:11},a.size==="small"&&{paddingLeft:8,paddingRight:8},a.size==="small"&&a.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function re(a){return a.key==="Backspace"||a.key==="Delete"}const Ke=p.forwardRef(function(o,h){const t=be({props:o,name:"MuiChip"}),{avatar:r,className:y,clickable:x,color:g="default",component:f,deleteIcon:i,disabled:$=!1,icon:b,label:I,onClick:N,onDelete:n,onKeyDown:l,onKeyUp:m,size:C="medium",variant:D="filled",tabIndex:c,skipFocusWhenDisabled:j=!1}=t,T=ve(t,we),P=p.useRef(null),me=Ce(P,h),Z=z=>{z.stopPropagation(),n&&n(z)},ue=z=>{z.currentTarget===z.target&&re(z)&&z.preventDefault(),l&&l(z)},xe=z=>{z.currentTarget===z.target&&(n&&re(z)?n(z):z.key==="Escape"&&P.current&&P.current.blur()),m&&m(z)},F=x!==!1&&N?!0:x,H=F||n?ae:f||"div",K=R({},t,{component:H,disabled:$,size:C,color:g,iconColor:p.isValidElement(b)&&b.props.color||g,onDelete:!!n,clickable:F,variant:D}),O=Ue(K),ge=H===ae?R({component:f||"div",focusVisibleClassName:O.focusVisible},n&&{disableRipple:!0}):{};let Y=null;n&&(Y=i&&p.isValidElement(i)?p.cloneElement(i,{className:L(i.props.className,O.deleteIcon),onClick:Z}):e.jsx(Me,{className:L(O.deleteIcon),onClick:Z}));let Q=null;r&&p.isValidElement(r)&&(Q=p.cloneElement(r,{className:L(O.avatar,r.props.className)}));let ee=null;return b&&p.isValidElement(b)&&(ee=p.cloneElement(b,{className:L(O.icon,b.props.className)})),e.jsxs(Fe,R({as:H,className:L(O.root,y),disabled:F&&$?!0:void 0,onClick:N,onKeyDown:ue,onKeyUp:xe,ref:me,tabIndex:j&&$?-1:c,ownerState:K},ge,T,{children:[Q||ee,e.jsx(He,{className:L(O.label),ownerState:K,children:I}),Y]}))}),qe=U(e.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNote"),Xe=U(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),Ge=U(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd");function Je({openDialog:a,setOpenDialog:o,setDataAction:h,userData:t}){const[r,y]=p.useState({id:t.id,role:t.role,instansi:t.instansi,nama:t.nama,email:t.email,username:t.username,no_telpon:t.no_telpon}),[x,g]=p.useState(),[f,i]=p.useState(""),[$,b]=p.useState(!1),I=l=>{let m;l.target.name==="no_telpon"&&(m=isNaN(Number(l.target.value))?0:Number(l.target.value)),y(C=>({...C,[l.target.name]:l.target.name==="no_telpon"?m:l.target.value}))},N=(l,m)=>{m!=="clickaway"&&i("")},n=async l=>{b(!0),l.preventDefault();const m=Be.safeParse({nama:r.nama,email:r.email,username:r.username,no_telpon:r.no_telpon});if(!m.success)return b(!1),g(m.error.flatten().fieldErrors);console.log("after validation 	:",m.data),g({});const C=await W("https://spbe-malkot.onrender.com/api/v1/user/"+r.id,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+E.get("authToken")},body:JSON.stringify(m.data)});return console.info("request 	:",C),C.success?(b(!1),y({id:0,role:"",instansi:"",nama:"",email:"",username:"",no_telpon:""}),i("Berhasil ubah pengguna"),setTimeout(()=>{o(D=>({...D,update:!1}))},2e3),h(D=>!D)):(b(!1),i(C.message))};return p.useEffect(()=>{const l=async()=>{},m=async()=>{};l(),m()},[]),e.jsx(ce,{open:a,onClose:()=>o(l=>({...l,update:!1})),PaperProps:{sx:{width:"25em",borderRadius:"0.3em",paddingX:"0.5em"}},children:e.jsxs(u,{component:"div",className:"dialog-content-container",children:[e.jsxs(u,{component:"div",className:"dialog-content-header",sx:{display:"flex",padding:"0.5em 0"},children:[e.jsxs(u,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(Xe,{fontSize:"small",color:"primary",sx:{marginX:"0.5em"}}),e.jsx(v,{variant:"subtitle1",sx:{fontWeight:550,color:S[700]},children:"Update Pengguna"})]}),e.jsx(A,{onClick:()=>o(l=>({...l,update:!1})),children:e.jsx(de,{fontSize:"small"})})]}),e.jsx(M,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsxs(u,{component:"div",className:"dialog-content-body",sx:{paddingX:"0.7em"},children:[e.jsxs(v,{variant:"subtitle2",sx:{marginBottom:"0.75em"},children:["Data ",e.jsx("span",{style:{fontSize:"0.75em",fontStyle:"italic"},children:"(Masukkan data pengguna baru)"})]}),e.jsx(u,{children:e.jsxs("form",{onSubmit:n,children:[e.jsx(_,{type:"text",name:"nama",label:"Nama",placeholder:"Masukkan nama pengguna",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:r.nama,onChange:I,error:!!(x&&x.nama)}),e.jsx(_,{type:"text",name:"email",label:"Email Address",placeholder:"Masukkan alamat email anda",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:r.email,onChange:I,error:!!(x&&x.email)}),e.jsx(_,{type:"text",name:"username",label:"Username",placeholder:"Masukkan username anda",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:r.username,onChange:I,error:!!(x&&x.username)}),e.jsx(_,{type:"text",name:"no_telpon",label:"No. Telepon",placeholder:"857xxxxxxxx",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"},startAdornment:e.jsxs(V,{position:"start",sx:{display:"flex",alignItems:"center"},children:[e.jsx(v,{variant:"caption",sx:{paddingRight:"0.5em"},children:"+62"}),e.jsxs(pe,{children:[e.jsx(u,{sx:{width:20,height:7,backgroundColor:"red",borderRadius:"0.2em 0.2em 0em 0em"}}),e.jsx(u,{sx:{width:20,height:7,backgroundColor:"white",borderRadius:"0em 0em 0.2em 0.2em"}})]})]})},sx:{marginBottom:"0.75em"},value:Number(r.no_telpon),onChange:I,error:!!(x&&x.no_telpon)}),e.jsx(M,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsx(u,{component:"div",className:"dialog-content-action",sx:{marginBottom:"1em",textAlign:"end"},children:e.jsx(w,{type:"submit",variant:"contained",size:"small",sx:{minWidth:"10em",textTransform:"none"},disabled:$,children:$?e.jsx(G,{size:20,color:"inherit"}):"Submit"})})]})})]}),e.jsx(J,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:f!=="",autoHideDuration:1500,message:f,onClose:N})]})})}function Ze({openDialog:a,setOpenDialog:o,setDataAction:h}){const[t,r]=p.useState({role_id:0,instansi_id:0,nama:"",email:"",username:"",no_telpon:0,password:""}),[y,x]=p.useState(!1),[g,f]=p.useState({role:[],instansi:[]}),[i,$]=p.useState(),[b,I]=p.useState(""),[N,n]=p.useState(!1),l=c=>{r(j=>({...j,[c.target.name]:c.target.value}))},m=c=>{let j;c.target.name==="no_telpon"&&(j=isNaN(Number(c.target.value))?0:Number(c.target.value)),r(T=>({...T,[c.target.name]:c.target.name==="no_telpon"?j:c.target.value}))},C=(c,j)=>{j!=="clickaway"&&I("")},D=async c=>{n(!0),c.preventDefault();const j=Re.safeParse(t);if(!j.success)return n(!1),$(j.error.flatten().fieldErrors);$({});const T=await W("https://spbe-malkot.onrender.com/api/v1/auth/daftar",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+E.get("authToken")},body:JSON.stringify(t)});return T.success?(n(!1),r({role_id:0,instansi_id:0,nama:"",email:"",username:"",no_telpon:0,password:""}),I("Berhasil menambahkan pengguna"),setTimeout(()=>{o(P=>({...P,create:!1}))},2e3),h(P=>!P)):(n(!1),I(T.message))};return p.useEffect(()=>{const c=async()=>{const T=await W("https://spbe-malkot.onrender.com/api/v1/role",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+E.get("authToken")}});f(P=>({...P,role:T.data}))},j=async()=>{const T=await W("https://spbe-malkot.onrender.com/api/v1/instansi",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+E.get("authToken")}});f(P=>({...P,instansi:T.data}))};c(),j()},[]),e.jsx(ce,{open:a,onClose:()=>o(c=>({...c,create:!1})),PaperProps:{sx:{width:"25em",borderRadius:"0.3em",paddingX:"0.5em"}},children:e.jsxs(u,{component:"div",className:"dialog-content-container",children:[e.jsxs(u,{component:"div",className:"dialog-content-header",sx:{display:"flex",padding:"0.5em 0"},children:[e.jsxs(u,{sx:{flexGrow:1,display:"flex",alignItems:"center"},children:[e.jsx(Ge,{fontSize:"small",color:"primary",sx:{marginX:"0.5em"}}),e.jsx(v,{variant:"subtitle1",sx:{fontWeight:550,color:S[700]},children:"Tambahkan Pengguna Baru"})]}),e.jsx(A,{onClick:()=>o(c=>({...c,create:!1})),children:e.jsx(de,{fontSize:"small"})})]}),e.jsx(M,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsxs(u,{component:"div",className:"dialog-content-body",sx:{paddingX:"0.7em"},children:[e.jsxs(v,{variant:"subtitle2",sx:{marginBottom:"0.75em"},children:["Data ",e.jsx("span",{style:{fontSize:"0.75em",fontStyle:"italic"},children:"(Masukkan data pengguna baru)"})]}),e.jsx(u,{children:e.jsxs("form",{onSubmit:D,children:[e.jsxs(oe,{fullWidth:!0,size:"small",sx:{marginBottom:"0.75em"},children:[e.jsx(te,{sx:{fontSize:"small"},children:"Role"}),e.jsx(ne,{name:"role_id",id:"demo-select-small",label:"Role",MenuProps:{slotProps:{paper:{sx:{fontSize:"small"}}}},sx:{fontSize:"small"},value:String(t.role_id===0?"":t.role_id),onChange:l,error:!!(i&&i.role_id),children:g.role.map((c,j)=>e.jsx(se,{value:c.id,sx:{fontSize:"small"},children:c.nama},j))})]}),e.jsxs(oe,{fullWidth:!0,size:"small",sx:{marginBottom:"0.75em"},children:[e.jsx(te,{sx:{fontSize:"small"},children:"Instansi"}),e.jsx(ne,{name:"instansi_id",id:"demo-select-small",label:"Instansi",MenuProps:{slotProps:{paper:{sx:{fontSize:"small"}}}},sx:{fontSize:"small"},value:String(t.instansi_id===0?"":t.instansi_id),onChange:l,error:!!(i&&i.instansi_id),children:g.instansi.map((c,j)=>e.jsx(se,{value:c.id,sx:{fontSize:"small"},children:c.nama},j))})]}),e.jsx(_,{type:"text",name:"nama",label:"Nama",placeholder:"Masukkan nama pengguna",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:t.nama,onChange:m,error:!!(i&&i.nama)}),e.jsx(_,{type:"text",name:"email",label:"Email Address",placeholder:"Masukkan alamat email anda",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:t.email,onChange:m,error:!!(i&&i.email)}),e.jsx(_,{type:"text",name:"username",label:"Username",placeholder:"Masukkan username anda",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"}},sx:{marginBottom:"0.75em"},value:t.username,onChange:m,error:!!(i&&i.username)}),e.jsx(_,{type:"text",name:"no_telpon",label:"No. Telepon",placeholder:"857xxxxxxxx",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"},startAdornment:e.jsxs(V,{position:"start",sx:{display:"flex",alignItems:"center"},children:[e.jsx(v,{variant:"caption",sx:{paddingRight:"0.5em"},children:"+62"}),e.jsxs(pe,{children:[e.jsx(u,{sx:{width:20,height:7,backgroundColor:"red",borderRadius:"0.2em 0.2em 0em 0em"}}),e.jsx(u,{sx:{width:20,height:7,backgroundColor:"white",borderRadius:"0em 0em 0.2em 0.2em"}})]})]})},sx:{marginBottom:"0.75em"},value:t.no_telpon,onChange:m,error:!!(i&&i.no_telpon)}),e.jsx(_,{type:y?"text":"password",name:"password",label:"Password",placeholder:"Masukkan password anda",autoComplete:"off",size:"small",fullWidth:!0,InputLabelProps:{sx:{fontSize:"small"}},InputProps:{sx:{fontSize:"small"},endAdornment:e.jsx(V,{position:"end",children:e.jsx(A,{size:"small",onClick:()=>x(c=>!c),sx:{padding:0},children:y?e.jsx(Ee,{fontSize:"small"}):e.jsx(We,{fontSize:"small"})})})},sx:{marginBottom:"1.75em"},value:t.password,onChange:m,error:!!(i&&i.password)}),e.jsx(M,{orientation:"horizontal",sx:{marginBottom:"0.5em"}}),e.jsx(u,{component:"div",className:"dialog-content-action",sx:{marginBottom:"1em",textAlign:"end"},children:e.jsx(w,{type:"submit",variant:"contained",size:"small",sx:{minWidth:"10em",textTransform:"none"},disabled:N,children:N?e.jsx(G,{size:20,color:"inherit"}):"Submit"})})]})})]}),e.jsx(J,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:b!=="",autoHideDuration:1500,message:b,onClose:C})]})})}function da(){const[a,o]=p.useState(null),[h,t]=p.useState({create:!1,update:!1}),[r,y]=p.useState(!1),[x,g]=p.useState({id:0,role:"",instansi:"",nama:"",email:"",username:"",no_telpon:""}),[f,i]=p.useState(""),[$,b]=p.useState({}),I=(n,l)=>{l!=="clickaway"&&i("")},N=(n,l)=>async()=>{b(C=>({...C,[l]:!0}));const m=await W("https://spbe-malkot.onrender.com/api/v1/user/"+n,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+E.get("authToken")}});return m.success?(y(C=>!C),b(C=>({...C,[l]:!1})),i("Berhasil menghapus data")):(b(C=>({...C,[l]:!1})),i(m.message))};return p.useEffect(()=>{(async()=>{const l=await W("https://spbe-malkot.onrender.com/api/v1/user",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+E.get("authToken")}});o(l.data)})()},[r]),e.jsx(ye,{children:e.jsxs(u,{component:"div",className:"content-container",sx:{padding:"0.5em"},children:[e.jsxs(u,{component:"div",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1em"},children:[e.jsx(v,{variant:"subtitle1",sx:{fontWeight:550,color:S[700]},children:"Kelola Data Pengguna"}),e.jsxs(u,{sx:{display:"flex",gap:"0 0.5em"},children:[e.jsx(_,{type:"text",name:"search",placeholder:"Cari pengguna",size:"small",autoComplete:"off",InputProps:{startAdornment:e.jsx(V,{position:"start",children:e.jsx(ze,{fontSize:"small"})}),sx:{fontSize:"0.6em","& .MuiInputBase-input::placeholder":{fontSize:"1.25em"}}},sx:{minWidth:"18em"}}),e.jsx(w,{variant:"outlined",startIcon:e.jsx(ke,{fontSize:"small"}),size:"small",sx:{textTransform:"none"},children:"Search by"}),e.jsx(w,{variant:"contained",startIcon:e.jsx(Se,{fontSize:"small"}),size:"small",sx:{textTransform:"none"},onClick:()=>t(n=>({...n,create:!0})),children:"Pengguna"})]})]}),e.jsxs(_e,{sx:{border:"1px solid "+S[300],borderRadius:"0.3em"},children:[e.jsxs(Ne,{children:[e.jsx(De,{sx:{backgroundColor:S[300]},children:e.jsxs(X,{children:[e.jsx(k,{children:e.jsx(u,{children:e.jsx(v,{variant:"caption",sx:{fontWeight:550,color:S[700],marginLeft:"0.5em"},children:"No."})})}),e.jsx(k,{children:e.jsx(u,{children:e.jsx(v,{variant:"caption",sx:{fontWeight:550,color:S[700],marginLeft:"0.5em"},children:"Username"})})}),e.jsx(k,{children:e.jsx(v,{variant:"caption",sx:{fontWeight:550,color:S[700]},children:"Instansi"})}),e.jsx(k,{children:e.jsx(v,{variant:"caption",sx:{fontWeight:550,color:S[700]},children:"Akses"})}),e.jsx(k,{children:e.jsx(v,{variant:"caption",sx:{fontWeight:550,color:S[700]},children:"No. Telepon"})}),e.jsx(k,{children:e.jsx(v,{variant:"caption",sx:{fontWeight:550,color:S[700]},children:"Options"})})]})}),e.jsx(Oe,{children:a?a.length>0?a.map((n,l)=>e.jsxs(X,{sx:{"&:hover":{backgroundColor:Ae[50]}},children:[e.jsx(k,{size:"small",children:e.jsx(v,{variant:"caption",children:l+1})}),e.jsx(k,{size:"small",children:e.jsx(u,{sx:{display:"flex",alignItems:"start"},children:e.jsxs(u,{sx:{marginLeft:"0.5em"},children:[e.jsx(v,{component:"div",variant:"caption",sx:{fontWeight:550,color:S[700]},children:n.nama}),e.jsx(v,{variant:"caption",children:n.email})]})})}),e.jsx(k,{size:"small",children:e.jsx(v,{variant:"caption",children:n.instansi})}),e.jsx(k,{size:"small",children:e.jsx(u,{sx:{maxWidth:"10em",display:"flex",flexWrap:"wrap",gap:"0.3em 0.5em"},children:e.jsx(Ke,{label:n.role,variant:"outlined",size:"small",sx:{backgroundColor:q[50],color:q[700],borderColor:q[400]}})})}),e.jsx(k,{size:"small",children:e.jsx(v,{variant:"caption",children:n.no_telpon})}),e.jsxs(k,{size:"small",children:[e.jsx(le,{title:"Edit",placement:"left",children:e.jsx(A,{size:"small",onClick:()=>{g(n),t(m=>({...m,update:!0}))},children:e.jsx(qe,{fontSize:"small"})})}),e.jsx(le,{title:"Hapus",placement:"right",children:e.jsx(A,{size:"small",onClick:N(n.id,`${n.nama}#${n.username}`),disabled:!!$[`${n.nama}#${n.username}`],children:$[`${n.nama}#${n.username}`]?e.jsx(G,{size:20}):e.jsx($e,{fontSize:"small"})})})]})]},l)):e.jsx(X,{children:e.jsx(k,{size:"small",children:e.jsx(Ie,{severity:"warning",icon:e.jsx(Pe,{fontSize:"small",sx:{color:S[700]}}),sx:{fontSize:"small",backgroundColor:"transparent",fontWeight:550,fontStyle:"italic"},children:"No records found"})})}):e.jsx(Te,{})})]}),e.jsx(Le,{component:"div",count:5,onPageChange:(n,l)=>{},page:0,rowsPerPage:5,rowsPerPageOptions:[5]})]}),e.jsx(J,{anchorOrigin:{horizontal:"left",vertical:"bottom"},open:!!f,message:f,autoHideDuration:1500,onClose:I}),e.jsx(Ze,{openDialog:h.create,setOpenDialog:t,setDataAction:y}),h.update&&e.jsx(Je,{openDialog:h.update,setOpenDialog:t,setDataAction:y,userData:x})]})})}export{da as default};
